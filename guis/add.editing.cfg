// init vars
menu1active = "info"
menu2active = ""

menu1infoactive = ""
menu1testactive = ""

// commands (cmd)
bordertabbuttonrollover_test = [
	if $guirollovername [
		bordercolname = $guirollovername
		count_temp = -1
	][
		count_temp = (+ $count_temp 1)
		if $count_temp [
			bordercolname = ""
			count_temp = -1
		]
	]
]
bordertabbutton = [//$arg1 = name; $arg2 = buttonaction; $arg3 = 0 (horiz), = 1 (vertic), $arg4 = buttonfontsize
	if (=s $menu1active $arg1) [
		bordertabbuttoncolour = "0xFFFFFF"
		actguibordercol = "0xFFFFFF"
	][
		bordertabbuttoncolour = "0x808080"
		actguibordercol = "0x000000"
	]
	if (&& (=s $bordercolname $arg1) (!=s $menu1active $arg1)) [//if the button is rollovered
		actguibordercol = "0xFF0000"
	]
	guilist [ guifont $arg4 [
		guibackground $guifieldbgcolour $guifieldbgblend $actguibordercol $guifieldborderblend 1
		if $arg3 [//button horizontal
			guistrut 0.4
			guilist [
				guistrut 0.1
				if (=s $menu1active $arg1) [//when button active nohitguifx
					guinohitfx [
						guibutton $arg1 $arg2 [] [] $bordertabbuttoncolour
					]
				][
					guibutton $arg1 $arg2 [] [] $bordertabbuttoncolour
				]
				guistrut 0.1
			]
			guistrut 0.4
		][//button vertical
			guilist [
				guistrut 0.4
				guilist [
					guistrut 0.1
				if (=s $menu1active $arg1) [//when button active nohitguifx
					guinohitfx [
						guibutton $arg1 $arg2 [] [] $bordertabbuttoncolour
					]
				][
					guibutton $arg1 $arg2 [] [] $bordertabbuttoncolour
				]
					guistrut 0.1
				]
				guistrut 0.4
			]
		]
	] ]
]
inputgui = [//$arg1 = header message; $arg2 = input var; $arg3 = if its a var or a command, e.g. mapauthor (cmd) 0: cmd 1: var; $arg4 = special message, e.g. hints
	input_temp = ""//guifield temp var for saving
	input_temp_var = $arg2
	input_temp_prev = $$arg2// content of the var/cmd
	input_temp_vc = $arg3
	input_temp_msg = $arg4
	newgui input_gui [
		guiheader @arg1
		guicenter [
			guitext (format "%1: %2" $input_temp_var $input_temp_prev)
		]
		guistrut 0.5
		guicenter [
			guifield input_temp 30 [] [0xFFFFFF] [1] [] [] ""
		]
		guistrut 0.5
		guicenter [ guifont "command" [
			guibutton "^fgOK" [
				if $input_temp_vc [//saves over a command
					$input_temp_var = $input_temp
				][
					($input_temp_var $input_temp)
				]
				cleargui 1
			]
			guistrut 3
			guibutton "^frCancel" [cleargui 1]
		]]
		if $input_temp_msg [
			guistrut 1
			guifont "small" [
				guitext $input_temp_msg [] [] [] [60]
			]
		]
	]
]

// gui tabs
menu1_info = [
	guilist [ 
		if $maptitle [
			guibutton (format "^fw%1" $maptitle) [(inputgui "Set mapname" maptitle 0); showgui input_gui]//inputgui: cmd
		] [
			guibutton "<Name>" [(inputgui "Set mapname" maptitle 0); showgui input_gui]//inputgui: cmd
		]
		guitext "^fa created by "
		if $mapauthor [
			guibutton (format "^f[0xFFFFFF]%1" $mapauthor) [(inputgui "Set mapauthor" mapauthor 0); showgui input_gui]//inputgui: cmd
		] [
			guibutton "<Name>" [(inputgui "Set mapauthor" mapauthor 0); showgui input_gui]//inputgui: cmd
		]
	]
	guitext (format "^faVersion: ^fw%1" (mapversion))
	guitext (format "^faRevision: ^fw%1" (maprevision))
	guilist [
		guitext (format "^faMap size: " )
		guibutton (format "^f[0xFFFFFF]%1" (mapsize)) [(inputgui "Set mapsize" mapsize 0); showgui input_gui]//inputgui: cmd
	]	
]
menu1_main = [
	guitext "hello test"
]

mapedit_tab = [
	guistayopen [
		guilist [//first menu row
			guibackground 0x707070 $guifieldbgblend $guibordercolour $guifieldborderblend 1
			guistrut 0.6
			guilist [
				guistrut 0.4
				guilist [
					bordertabbutton "info"	[menu1active = "info"] 0 "command"//cmd
					guistrut 0.5
					bordertabbutton "test" [menu1active = "test"] 0 "command"//cmd
				]
				bordertabbuttonrollover_test	//cmd; when roll over the border gets red of the borderbuttons
				guistrut 0.4
			]
			guistrut 0.6
		]
		guistrut 0.2
		guibar 0xFFFFFF
		((concatword "menu1_" $menu1active)) //cexecutes the choosen menu
	]
] 
//~~~~~~~~~~~~~~~~~~
another_tab_tab = [

]

// gui structure
newgui editing_gui [
	guiheader "map"
		[mapedit_tab]
	guitab "anothzer tab"
		[another_tab_tab]
]

// do
showgui editing_gui